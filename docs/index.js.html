<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FlowClient = exports.generateImage = void 0;
const axios_1 = require("axios");
const baseUrl = "https://inspirobot.me/api?";
async function _get(endpoint) {
    return await axios_1.default.get(baseUrl + endpoint, {
        headers: {
            "User-Agent": "InspiroBotJS"
        }
    }).then(res => {
        return res.data;
    }).catch(err => {
        throw err;
    });
}
/**
 * Generates an image with a quote
 * @constructor
 * @return {Promise&lt;string>} The link to image (.jpg)
 */
async function generateImage() {
    return new Promise((resolve, reject) => {
        _get("generate=true").then(res => resolve(res)).catch((err) => reject(err));
    });
}
exports.generateImage = generateImage;
/**
 * A class for streaming mindfulness mode using consistent session IDs
 */
class FlowClient {
    sessionId = "";
    async _createSessionId() {
        await _get("getSessionID=1").then(r => {
            if (r)
                this.sessionId = r;
        });
    }
    /**
     * Generates a new mindfulness stream
     * @param {Object=} options - Optional options
     * @param {boolean=} options.newSessionId - Force creation of a new session ID (default to false)
     * @return {Promise&lt;Flow>} A object containing quotes, text and a mp3 stream URL
     */
    async generateFlow(options) {
        if (options?.newSessionId || !this.sessionId)
            await this._createSessionId();
        return new Promise((resolve, reject) => {
            _get("generateFlow=1&amp;sessionID=" + this.sessionId).then((r) => {
                r.sessionId = this.sessionId;
                resolve(r);
            }).catch(err => reject(err));
        });
    }
}
exports.FlowClient = FlowClient;
//# sourceMappingURL=index.js.map</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="FlowClient.html">FlowClient</a></li><li><a href="generateImage.html">generateImage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Sun Feb 06 2022 18:59:52 GMT+0100 (Mitteleurop√§ische Normalzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
